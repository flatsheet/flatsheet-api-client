(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var request=_dereq_("request");module.exports=Flatsheet;function Flatsheet(opts){if(!(this instanceof Flatsheet))return new Flatsheet(opts);opts||(opts={});this.account={username:opts.username||"",password:opts.password||""};this.host=opts.host||"https://app.flatsheet.io";this.apiVersion=opts.apiVersion||"/v2/"}Flatsheet.prototype.list=function list(cb){return this.req("get","sheets",{},cb)};Flatsheet.prototype.index=Flatsheet.prototype.list;Flatsheet.prototype.sheet=function sheet(id,cb){return this.req("get","sheets/"+id,{},cb)};Flatsheet.prototype.fetch=Flatsheet.prototype.sheet;Flatsheet.prototype.get=Flatsheet.prototype.sheet;Flatsheet.prototype.create=function create(sheet,cb){return this.req("post","sheets",sheet,cb)};Flatsheet.prototype.update=function update(sheet,cb){return this.req("put","sheets/"+sheet.id,sheet,cb)};Flatsheet.prototype.destroy=function destroy(id,cb){return this.req("delete","sheets/"+id,{},cb)};Flatsheet.prototype.addRow=function addRow(id,row,cb){var self=this;this.sheet(id,function(err,req){var sheet=req;sheet.rows.push(row);self.update(sheet,cb)})};Flatsheet.prototype.req=function req(method,path,params,cb){var opts={method:method,uri:this.fullUrl(path,params),headers:{Authorization:this.account.username+":"+this.account.password},body:params,json:true};if(typeof cb==="undefined")return request(opts);else request(opts,getResponse);function getResponse(error,response,body){if(cb){if(error)return cb(error);if(response.statusCode>=400)return cb({error:response.statusCode});return cb(null,body)}}};Flatsheet.prototype.fullUrl=function fullUrl(path,params){return this.host+"/api"+this.apiVersion+path+"/"}},{1:2}],2:[function(require,module,exports){var window=_dereq_("global/window");var once=_dereq_("once");var parseHeaders=_dereq_("parse-headers");var messages={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"};var XHR=window.XMLHttpRequest||noop;var XDR="withCredentials"in new XHR?XHR:window.XDomainRequest;module.exports=createXHR;function createXHR(options,callback){if(typeof options==="string"){options={uri:options}}options=options||{};callback=once(callback);var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new XDR}else{xhr=new XHR}}var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var key;var load=options.response?loadResponse:loadXhr;if("json"in options){isJson=true;headers["Accept"]="application/json";if(method!=="GET"&&method!=="HEAD"){headers["Content-Type"]="application/json";body=JSON.stringify(options.json)}}xhr.onreadystatechange=readystatechange;xhr.onload=load;xhr.onerror=error;xhr.onprogress=function(){};xhr.ontimeout=noop;xhr.open(method,uri,!sync);if(options.withCredentials||options.cors&&options.withCredentials!==false){xhr.withCredentials=true}if(!sync){xhr.timeout="timeout"in options?options.timeout:5e3}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key])}}}else if(options.headers){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in options){xhr.responseType=options.responseType}if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr)}xhr.send(body);return xhr;function readystatechange(){if(xhr.readyState===4){load()}}function getBody(){var body=null;if(xhr.response){body=xhr.response}else if(xhr.responseType==="text"||!xhr.responseType){body=xhr.responseText||xhr.responseXML}if(isJson){try{body=JSON.parse(body)}catch(e){}}return body}function getStatusCode(){return xhr.status===1223?204:xhr.status}function errorFromStatusCode(status){var error=null;if(status===0||status>=400&&status<600){var message=(typeof body==="string"?body:false)||messages[String(status).charAt(0)];error=new Error(message);error.statusCode=status}return error}function loadResponse(){var status=getStatusCode();var error=errorFromStatusCode(status);var response={body:getBody(),statusCode:status,statusText:xhr.statusText,raw:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders())}else{response.headers={}}callback(error,response,response.body)}function loadXhr(){var status=getStatusCode();var error=errorFromStatusCode(status);xhr.status=xhr.statusCode=status;xhr.body=getBody();xhr.headers=parseHeaders(xhr.getAllResponseHeaders());callback(error,xhr,xhr.body)}function error(evt){callback(evt,xhr)}}function noop(){}},{1:3,2:4,3:8}],3:[function(require,module,exports){(function(global){if(typeof window!=="undefined"){module.exports=window}else if(typeof global!=="undefined"){module.exports=global}else{module.exports={}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],4:[function(require,module,exports){module.exports=once;once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true})});function once(fn){var called=false;return function(){if(called)return;called=true;return fn.apply(this,arguments)}}},{}],5:[function(require,module,exports){var isFunction=_dereq_("is-function");module.exports=forEach;var toString=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;function forEach(list,iterator,context){if(!isFunction(iterator)){throw new TypeError("iterator must be a function")}if(arguments.length<3){context=this}if(toString.call(list)==="[object Array]")forEachArray(list,iterator,context);else if(typeof list==="string")forEachString(list,iterator,context);else forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){iterator.call(context,array[i],i,array)}}}function forEachString(string,iterator,context){for(var i=0,len=string.length;i<len;i++){iterator.call(context,string.charAt(i),i,string)}}function forEachObject(object,iterator,context){for(var k in object){if(hasOwnProperty.call(object,k)){iterator.call(context,object[k],k,object)}}}},{1:6}],6:[function(require,module,exports){module.exports=isFunction;var toString=Object.prototype.toString;function isFunction(fn){var string=toString.call(fn);return string==="[object Function]"||typeof fn==="function"&&string!=="[object RegExp]"||typeof window!=="undefined"&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}},{}],7:[function(require,module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){return str.replace(/^\s*/,"")};exports.right=function(str){return str.replace(/\s*$/,"")}},{}],8:[function(require,module,exports){var trim=_dereq_("trim"),forEach=_dereq_("for-each"),isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"};module.exports=function(headers){if(!headers)return{};var result={};forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));if(typeof result[key]==="undefined"){result[key]=value}else if(isArray(result[key])){result[key].push(value)}else{result[key]=[result[key],value]}});return result}},{1:5,2:7}]},{},[1]);